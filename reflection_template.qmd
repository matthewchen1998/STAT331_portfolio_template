---
title: "STAT 331 Portfolio"
author: Matthew Chen
format: 
  html: 
    self-contained: true
layout: margin-left
editor: visual
execute: 
  eval: false
  echo: true
---

[**My Grade:**]{.underline} I believe my grade equivalent to course work evidenced below to be an B.

[**Learning Objective Evidence:**]{.underline} In the code chunks below, provide code from a Lab or Challenge assignment where you believe you have demonstrated proficiency with the specified learning target. Be sure to specify **where** the code came from (e.g., Lab 4 Question 2).

## Working with Data

**WD-1: I can import data from a *variety* of formats (e.g., csv, xlsx, txt, etc.).**

-   `csv`
-   lab 4

```{r wd-1-csv}

library(tidyverse)
library(dplyr)
library(here)

 avocado<-read_csv(here("week 4", "avocado.csv"))

```

-   `xlsx`
-   practice activity 4

```{r wd-1-xlsx}


military <- read_xlsx(here::here("data", 
                                 "gov_spending_per_capita.xlsx"), 
                      sheet = "Share of Govt. spending", 
                      skip = 7, 
                      n_max = 191)

```

-   `txt`
-   practice activity 5.2

```{r wd-1-txt}

message <- read_csv(here::here("data", "scrambled_message.txt")
                      )



```

**WD-2: I can select necessary columns from a dataset.**

-   Lab 4 question 4

```{r wd-2}

avocado_clean|>
  separate(col = Date, into = c('year','month','day'),sep ='/')|>
  select(month,total_volume)|>
  slice_max(total_volume)
```

**WD-3: I can filter rows from a dataframe for a *variety* of data types (e.g., numeric, integer, character, factor, date).**

-   numeric
-   Lab 4 Question 3

```{r wd-3-numeric}


avocado_major_region|>
  filter(type =="organic",year ==2017)|>
  select(region,total_small)|>
  slice_max(total_small)

```

-   character -- specifically a string
-   Lab 3 Question 14

```{r wd-3-string}


hiphop_clean|>
  mutate(bieber = as.numeric(bieber))|>
  filter(city > 10000 & city< 60000, age> 17 & age< 23, ethnic == "white", sex == "Male", bieber >= 5)|>
  distinct(subj)

```

-   factor
-   Lab 3 Question 11

```{r wd-3-factor}


hiphop_clean|>
   group_by(word)|>
  filter(familiarity ==1,age<20)|>
  summarise(familiarity = n())|>
  slice_max(familiarity)
```

-   date
-   Practice activity 5.1 question 2

```{r wd-3-date}


suspects <- suspects %>%
  filter(!wday(Time.Spotted, label = TRUE, abbr = FALSE) %in% c("Tuesday" , "Thursday"))
```

**WD-4: I can modify existing variables and create new variables in a dataframe for a *variety* of data types (e.g., numeric, integer, character, factor, date).**

-   numeric
-   Lab 4 question 6

```{r wd-4-numeric}

 california_new|>
  group_by(region)|>
  summarize(m_Conventional=mean(conventional),m_organic = mean(organic))|>
    mutate(diff_mean = m_organic - m_Conventional)|>
    distinct(abs(diff_mean), region)

```

-   character -- specifically a string
-   lab 3 question 7

```{r wd-4-string}

hiphop_clean<-hiphop_clean|>
  mutate(race = if_else(ethnic == "white", "white","non-white"))
```

-   factor
-   lab 3 question 5

```{r wd-4-factor}


hiphop_clean <- hiphop |>
  mutate(across( c(familiarity, jayz, jayz1, barkley, boondocks,
boondocks1, monique, bieber, word, subj, ethnic,sex),as.factor))|>
  select(-one_of("numPreferredArtists","numOverallArtists"))
```

-   date
-   practice activity 5.1 question 1

```{r wd-4-date}
suspects <- suspects %>%
  mutate(Time.Spotted = ymd_hms(Time.Spotted),
         Time.Spotted = force_tz(Time.Spotted,
                                 tzone = "America/Los_Angeles")
         )

```

**WD-5: I can use mutating joins to combine multiple dataframes.**

-   `left_join()`

```{r wd-5-left}


```

-   `right_join()`

```{r wd-5-right}

```

-   `inner_join()`

```{r wd-5-inner}

```

-   `full_join()`
-   challenge 4

```{r wd-5-full}
join_dataset<-house_price_four_cities|>
  full_join(california_avocado_region, by = "region")|>
   select(region, AveragePrice, prices,Date,months,type)|>
  distinct(AveragePrice,prices,type)
```

**WD-6: I can use filtering joins to filter rows from a dataframe.**

-   `semi_join()`
-   lab 4 question 6

```{r wd-6-semi}
california_avocado_region<-avocado_clean|>
  semi_join(california_region, by = "region")
```

-   `anti_join()`
-   lab 4 question 5

```{r wd-6-anti}
avocado_metro_region<-avocado_clean|>
  anti_join(major_region, by = "region")|>
  anti_join(state_region, by = "region")|>
  filter(region!= "TotalUS")
```

**WD-7: I can pivot dataframes from long to wide and visa versa**

-   `pivot_longer()`
-   challenge 4

```{r wd-7-long}
house_price_four_cities<-median_house_price|>
  semi_join(four_cities, by = "RegionName")|>
  pivot_longer(names_to = "months", values_to = "prices", c(-RegionID, -SizeRank, -RegionName,-RegionType,-StateName))|>
  rename(region = "RegionName")
```

-   `pivot_wider()`
-   lab 4 question 6

```{r wd-7-wide}
california_new<-california_avocado_region|>
  select(-(total_volume:total_extra_large),-year,Date)|>
  pivot_wider(names_from = type, values_from = AveragePrice)
```

## Reproducibility

**R-1: I can create professional looking, reproducible analyses using RStudio projects, Quarto documents, and the here package.**

I've done this in the following provided assignments:

**R-2: I can write well documented and tidy code.**

-   Example 1
-   lab 5 question 3 time-series-plot section

```{r r-2-1}
surveys|>
  group_by(genus,year)|>
  summarize(weight = mean(weight))|>
  ggplot( aes(y = weight, x = year,color = fct_reorder2(genus,year,weight)))+
  geom_line()+
  labs(x = "years", y = "weight (gm)", color = "genus")
```

-   Example 2
-   lab 4 question 4

```{r r-2-2}

 avocado_clean|>
  separate(col = Date, into = c('year','month','day'),sep ='/')|>
  select(month,total_volume)|>
  slice_max(total_volume)

```

**R-3: I can write robust programs that are resistant to changes in inputs.**

-   Example 1
-   challenge 4

```{r r-3-1}

house_price_four_cities<-median_house_price|>
  semi_join(four_cities, by = "RegionName")|>
  pivot_longer(names_to = "months", values_to = "prices", c(-RegionID, -SizeRank, -RegionName,-RegionType,-StateName))|>
  rename(region = "RegionName")

```

-   Example 2
-   lab 3 question 9

```{r r-3-2}
  hiphop_clean|>
  select(subj,sex,age,ethnic)|>
  distinct(subj, .keep_all = TRUE)|>
  summary()

```

## Data Visualization & Summarization

**DVS-1: I can create visualizations for a *variety* of variable types (e.g., numeric, character, factor, date)**

-   numeric variables
-   lab 5 time-series-plot section question 4 (Revised - theme(plot.title.position = "plot"))

```{r dvs-1-num}

surveys|>
  group_by(genus,year)|>
  summarize(weight = mean(weight))|>
  ggplot( aes(y = weight, x = year,color = fct_reorder2(genus,year,weight)))+
  geom_line()+
  labs(x = "years", y = NULL, color = "genus")+
  ggtitle("Mean Weight (gm) for each genus for each year ")+
 theme( plot.title.position = "plot")
 
```

-   numeric variables and categorical variables
-   lab 5 revisiting lab 2 section question 2

```{r dvs-2-num-cat}


ggplot(data = surveys,
  mapping = aes(x = weight, y = fct_reorder(species,weight)))+
  geom_boxplot()+
   labs(x = "Weight (gm)", y = NULL)+ggtitle("Weights for Each Animal Species")+
   theme( plot.title.position = "plot")
     

```

-   categorical variables
-   lab 3 question 10

```{r dvs-2-cat}
     ggplot(data = demo,
  mapping = aes(x = ethnic, fill = ethnic))+
    geom_bar(show.legend = FALSE)+
    labs(x = "Ethnicity of Participants", y = "number of student",
         title = "The Ethnic Background of Students in the Study")

```

-   dates

```{r dvs-2-date}



```

**DVS-2: I use plot modifications to make my visualization clear to the reader.**

-   Example 1
-   lab 5 question 3 capture 0ver the week section (Revised - theme(plot.title.position = "plot"))

```{r dvs-2-1}
surveys|>
  filter(day_of_week != "NA" )|>
  mutate(day_of_week = fct_recode(day_of_week, 
    "Weekday" = "Mon",
    "Weekday" = "Tue",
    "Weekday" = "Wed",
    "Weekday" = "Thu",
    "Weekday" = "Fri",
    "Weekend" = "Sat",
    "Weekend" = "Sun"))|>
  group_by(day_of_week)|>
  summarise(taxa = n())|>
  ggplot(aes( x = day_of_week, y =taxa, fill = day_of_week))+
     geom_col(show.legend = FALSE,width = 0.2)+
     labs(x = "day of week", y = NULL)+
  ggtitle("Number of rodents captured either in weekend \n or in weekday")+
  theme(plot.title.position = "plot")
```

-   Example 2
-   lab 5 question 3

```{r dvs-2-2}
  ggplot(data = california_graph, 
           mapping = aes( x = region, y = diff_price, fill = region))+
      geom_col(show.legend = FALSE,width = 0.4)+
      scale_x_discrete(expand=c(0,0))+
      scale_y_continuous(expand=c(0,0)) +
          labs(y = "differences in price", x= "cities of California")+
  ggtitle("differences in price of organic vs. conventional \n avocado across four California cities")+
      theme(plot.title = element_text(hjust = 0.5))
```

**DVS-3: I show creativity in my visualizations**

-   Example 1
-   lab 4 question 7

```{r dvs-3-1}
  ggplot(data = California_mean_graph, aes(x = region, y = Avocado_sold, fill = Avocado_Size))+
    
    geom_col(position = position_fill(reverse = TRUE))+
    labs(y = "Proportion of Mean Avocado Sold", x = "Region of CA")+
    facet_wrap(.~type)+
    
    guides(fill = guide_legend(title = "Avocado Size"))+
    scale_fill_discrete(labels = c("extra large", "large","small"))
  
```

-   Example 2
-   challenge 2

```{r dvs-3-2}


ggplot(data = surveys,
  mapping = aes(x = weight, y = species, fill= species))+
  geom_density_ridges(rel_min_height = 0.005, scale = 4, alpha = 0.4, color = "white") +
  scale_x_continuous(expand=c(0,0))+
  scale_y_discrete(expand = c(0,0))+
   labs(x = "Weight (gm)", y = "Animal Species" )

```

**DVS-4: I can calculate numerical summaries of variables.**

-   Example 1
-   lab 4 question 5

```{r dvs-4-1}

avocado_metro_region|>
  group_by(region)|>
  summarize(mean_total_volume = mean(total_volume))|>
  slice_max(region, n=5)
```

-   Example 2
-   lab 5 question 3 time-series-plot

```{r dvs-4-2}

surveys|>
  group_by(genus,year)|>
  summarize(weight = mean(weight))|>
  ggplot( aes(y = weight, x = year,color = fct_reorder2(genus,year,weight)))+
  geom_line()+
  labs(x = "years", y = "weight (gm)", color = "genus")

```

**DVS-5: I can find summaries of variables across multiple groups.**

-   Example 1
-   lab 3 question 4

```{r dvs-5-1}

hiphop|>
  summarize(across(asianMove:whiteMove,mean), blackWeekly = mean(blackWeekly))
```

-   Example 2
-   lab 3 question 9

```{r dvs-5-2}
 hiphop_clean|>
  select(subj,sex,age,ethnic)|>
  distinct(subj, .keep_all = TRUE)|>
  summary()
```

**DVS-6: I can create tables which make my summaries clear to the reader.**

-   Example 1
-   lab 4 question 4

```{r dvs-6-1}
avocado_metro_region|>
  group_by(region)|>
  summarize(mean_total_volume = mean(total_volume))|>
  slice_max(region, n=5)
```

-   Example 2
-   lab 4 question 7

```{r dvs-6-2}
 California_mean_graph<- california_avocado_region|>
    group_by(region,type)|>
  summarize(m_total_volume=mean(total_volume), m_total_small = mean(total_small),m_total_large = mean(total_large),m_total_extra_large = mean(total_extra_large),.groups = 'drop')|>
    pivot_longer(names_to = "Avocado_Size", values_to = "Avocado_sold", c(-region, -type,-m_total_volume))
```

**DVS-7: I show creativity in my tables.**

-   Example 1
-   challenge 4

```{r dvs-7-1}


house_price_four_cities<-median_house_price|>
  semi_join(four_cities, by = "RegionName")|>
  pivot_longer(names_to = "months", values_to = "prices", c(-RegionID, -SizeRank, -RegionName,-RegionType,-StateName))|>
  rename(region = "RegionName")

house_price_four_cities$region<- gsub(", CA","",as.character(house_price_four_cities$region))

house_price_four_cities$region<-gsub(" ","",as.character(house_price_four_cities$region))
```

-   Example 2
-   lab 4 question 2

```{r dvs-7-2}
avocado_clean<-avocado |>
  select(-ends_with("Bags"),-...1)|>
  rename(total_small = '4046',total_large = '4225',
         total_extra_large='4770',
         total_volume = "Total Volume")
```

## Program Efficiency

**PE-1: I can write concise code which does not repeat itself.**

-   using a single function call
-   lab 3 question 5

```{r pe-1-one-call}
hiphop_clean <- hiphop |>
  mutate(across( c(familiarity, jayz, jayz1, barkley, boondocks,
boondocks1, monique, bieber, word, subj, ethnic,sex),as.factor))|>
  select(-one_of("numPreferredArtists","numOverallArtists"))
```

-   `across()`
-   lab 3 question 5

```{r pe-1-across}
hiphop_clean <- hiphop |>
  mutate(across( c(familiarity, jayz, jayz1, barkley, boondocks,
boondocks1, monique, bieber, word, subj, ethnic,sex),as.factor))|>
  select(-one_of("numPreferredArtists","numOverallArtists"))
```

-   `map()` functions

```{r pe-1-map-1}

```

**PE-2: I can write functions to reduce repetition in my code.**

-   Example 1
-   lab 4 question 7

```{r pe2-1}
 California_mean_graph<- california_avocado_region|>
    group_by(region,type)|>
  summarize(m_total_volume=mean(total_volume), m_total_small = mean(total_small),m_total_large = mean(total_large),m_total_extra_large = mean(total_extra_large),.groups = 'drop')|>
    pivot_longer(names_to = "Avocado_Size", values_to = "Avocado_sold", c(-region, -type,-m_total_volume))
  
```

-   Example 2
-   lab 3 question 14

```{r pe2-2}

hiphop_clean|>
  mutate(bieber = as.numeric(bieber))|>
  filter(city > 10000 & city< 60000, age> 17 & age< 23, ethnic == "white", sex == "Male", bieber >= 5)|>
  distinct(subj)
```

**PE-3:I can use iteration to reduce repetition in my code.**

-   `across()`
-   lab 3 question 4

```{r pe-3-across}
hiphop|>
  summarize(across(asianMove:whiteMove,mean), blackWeekly = mean(blackWeekly))

```

-   `map()` functions (Provide 2 Examples)

```{r pe-3-map-1}

```

```{r pe-3-map-2}

```

**PE-4: I can use modern tools when carrying out my analysis.**

-   Example 1
-   lab 3 question 11

```{r pe-4-1}

hiphop_clean|>
   group_by(word)|>
  filter(familiarity ==1,age<20)|>
  summarise(familiarity = n())|>
  slice_max(familiarity)

```

-   Example 2
-   lab 4 question 5

```{r pe-4-2}

hiphop_clean <- hiphop |>
  mutate(across( c(familiarity, jayz, jayz1, barkley, boondocks,
boondocks1, monique, bieber, word, subj, ethnic,sex),as.factor))|>
  select(-one_of("numPreferredArtists","numOverallArtists"))

```

## Data Simulation & Modeling

**DSM-1: I can simulate data from a *variety* of probability models.**

-   Example 1

```{r dsm-1-1}

```

-   Example 2

```{r dsm-1-2}

```

**DSM-2: I can fit a linear regression and extract necessary summary measures.**

-   Example 1

```{r dsm-2-1}

```

-   Example 2

```{r dsm-2-2}

```

## Revising My Thinking

<!-- How did you revise your thinking throughout the course? How did you revise your thinking on the code examples you have provided in your portfolio? -->

Answer: Before lab 5, I do not know that I could use the dplyr function along with the ggplot to create plots and graphs. On Lab 5, I have used the dplyr function to pipe functions into my ggplots. Previously, I always thought that you need to create another dataset in order to create a graph using the ggplot. After I have submitted my lab 5 assignment, I have found out that I do not fully follow Will Chase to have my titles of the graph to be left-aligned. Previously, I only know how to center the titles of the graph as I do not know about the importance of left-alignment of the titles. After doing some research, I have found out that using theme(plot.title.position = "plot") will create a left-alignment for your graph titles.

## Extending My Thinking

<!-- How did you extended your thinking throughout the course? How did you extend your thinking on the code examples you have provided in your portfolio? -->

Answer: Throughout the course, I have been think about about how to divide my titles into two lines when the lines are too long. Through some research, I have found out that by using the escape character "\\n" I could divide my titles into two lines. I started to use the escape character "\\n" on my lab 4 assignment. I also learned how to center my title for the graph when I was doing my lab 4 assignment. I found out that the function "theme(plot.title = element_text(hjust = 0.5))" allows you to center your title for the graph after doing some research . When I was doing research for my Challenge 4 assignment, I have learned how to remove spaces between character strings within a variable using the "gsub" function.

## Peer Support & Collaboration

<!-- Include an image of feedback you gave that you are proud of (either in a peer review or in Discord) -->

Answer: Throughout the course, I have provided help for my team members during Practice acitivity by doing research for my team members as an editor and ask Professor for help if we do not understand some of the instructions of the materials. During peer review, I try my best to offer feedbacks that both point out what they have done right and wrong and offer them advice on improving their codes. In the image below, I provided feedbacks that both points out his mistakes and offers him advice on how to improve his codes. ![](images/Screen%20Shot%202023-02-19%20at%203.11.49%20PM.png)
